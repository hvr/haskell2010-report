\chapter{\texttt{Foreign.C.Error}}
\label{module:Foreign.C.Error}
\haddockbeginheader
{\haddockverb\begin{verbatim}
module Foreign.C.Error (
    Errno(Errno),  eOK,  e2BIG,  eACCES,  eADDRINUSE,  eADDRNOTAVAIL,  eADV, 
    eAFNOSUPPORT,  eAGAIN,  eALREADY,  eBADF,  eBADMSG,  eBADRPC,  eBUSY, 
    eCHILD,  eCOMM,  eCONNABORTED,  eCONNREFUSED,  eCONNRESET,  eDEADLK, 
    eDESTADDRREQ,  eDIRTY,  eDOM,  eDQUOT,  eEXIST,  eFAULT,  eFBIG,  eFTYPE, 
    eHOSTDOWN,  eHOSTUNREACH,  eIDRM,  eILSEQ,  eINPROGRESS,  eINTR,  eINVAL, 
    eIO,  eISCONN,  eISDIR,  eLOOP,  eMFILE,  eMLINK,  eMSGSIZE,  eMULTIHOP, 
    eNAMETOOLONG,  eNETDOWN,  eNETRESET,  eNETUNREACH,  eNFILE,  eNOBUFS, 
    eNODATA,  eNODEV,  eNOENT,  eNOEXEC,  eNOLCK,  eNOLINK,  eNOMEM,  eNOMSG, 
    eNONET,  eNOPROTOOPT,  eNOSPC,  eNOSR,  eNOSTR,  eNOSYS,  eNOTBLK, 
    eNOTCONN,  eNOTDIR,  eNOTEMPTY,  eNOTSOCK,  eNOTTY,  eNXIO,  eOPNOTSUPP, 
    ePERM,  ePFNOSUPPORT,  ePIPE,  ePROCLIM,  ePROCUNAVAIL,  ePROGMISMATCH, 
    ePROGUNAVAIL,  ePROTO,  ePROTONOSUPPORT,  ePROTOTYPE,  eRANGE,  eREMCHG, 
    eREMOTE,  eROFS,  eRPCMISMATCH,  eRREMOTE,  eSHUTDOWN,  eSOCKTNOSUPPORT, 
    eSPIPE,  eSRCH,  eSRMNT,  eSTALE,  eTIME,  eTIMEDOUT,  eTOOMANYREFS, 
    eTXTBSY,  eUSERS,  eWOULDBLOCK,  eXDEV,  isValidErrno,  getErrno, 
    resetErrno,  errnoToIOError,  throwErrno,  throwErrnoIf,  throwErrnoIf_, 
    throwErrnoIfRetry,  throwErrnoIfRetry_,  throwErrnoIfMinus1, 
    throwErrnoIfMinus1_,  throwErrnoIfMinus1Retry,  throwErrnoIfMinus1Retry_, 
    throwErrnoIfNull,  throwErrnoIfNullRetry,  throwErrnoIfRetryMayBlock, 
    throwErrnoIfRetryMayBlock_,  throwErrnoIfMinus1RetryMayBlock, 
    throwErrnoIfMinus1RetryMayBlock_,  throwErrnoIfNullRetryMayBlock, 
    throwErrnoPath,  throwErrnoPathIf,  throwErrnoPathIf_, 
    throwErrnoPathIfNull,  throwErrnoPathIfMinus1,  throwErrnoPathIfMinus1_
  ) where\end{verbatim}}
\haddockendheader

The module \haddocktt{Foreign.C.Error} facilitates C-specific error
 handling of \haddocktt{errno}.
\par

\section{Haskell representations of \haddocktt{errno} values
}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
newtype\ Errno
\end{tabular}]\haddockbegindoc
\haddockbeginconstrs
\haddockdecltt{=} & \haddockdecltt{Errno CInt} & \\
\haddockendconstrs\par
Haskell representation for \haddocktt{errno} values.
 The implementation is deliberately exposed, to allow users to add
 their own definitions of \haddockid{Errno} values.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
instance\ Eq\ Errno
\end{tabular}]
\end{haddockdesc}
\subsection{Common \haddocktt{errno} symbols
}
Different operating systems and/or C libraries often support
 different values of \haddocktt{errno}.  This module defines the common values,
 but due to the open definition of \haddockid{Errno} users may add definitions
 which are not predefined.
\par

\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
eOK\ ::\ Errno\\e2BIG\ ::\ Errno\\eACCES\ ::\ Errno\\eADDRINUSE\ ::\ Errno\\eADDRNOTAVAIL\ ::\ Errno\\eADV\ ::\ Errno\\eAFNOSUPPORT\ ::\ Errno\\eAGAIN\ ::\ Errno\\eALREADY\ ::\ Errno\\eBADF\ ::\ Errno\\eBADMSG\ ::\ Errno\\eBADRPC\ ::\ Errno\\eBUSY\ ::\ Errno\\eCHILD\ ::\ Errno\\eCOMM\ ::\ Errno\\eCONNABORTED\ ::\ Errno\\eCONNREFUSED\ ::\ Errno\\eCONNRESET\ ::\ Errno\\eDEADLK\ ::\ Errno\\eDESTADDRREQ\ ::\ Errno\\eDIRTY\ ::\ Errno\\eDOM\ ::\ Errno\\eDQUOT\ ::\ Errno\\eEXIST\ ::\ Errno\\eFAULT\ ::\ Errno\\eFBIG\ ::\ Errno\\eFTYPE\ ::\ Errno\\eHOSTDOWN\ ::\ Errno\\eHOSTUNREACH\ ::\ Errno\\eIDRM\ ::\ Errno\\eILSEQ\ ::\ Errno\\eINPROGRESS\ ::\ Errno\\eINTR\ ::\ Errno\\eINVAL\ ::\ Errno\\eIO\ ::\ Errno\\eISCONN\ ::\ Errno\\eISDIR\ ::\ Errno\\eLOOP\ ::\ Errno\\eMFILE\ ::\ Errno\\eMLINK\ ::\ Errno\\eMSGSIZE\ ::\ Errno\\eMULTIHOP\ ::\ Errno\\eNAMETOOLONG\ ::\ Errno\\eNETDOWN\ ::\ Errno\\eNETRESET\ ::\ Errno\\eNETUNREACH\ ::\ Errno\\eNFILE\ ::\ Errno\\eNOBUFS\ ::\ Errno\\eNODATA\ ::\ Errno\\eNODEV\ ::\ Errno\\eNOENT\ ::\ Errno\\eNOEXEC\ ::\ Errno\\eNOLCK\ ::\ Errno\\eNOLINK\ ::\ Errno\\eNOMEM\ ::\ Errno\\eNOMSG\ ::\ Errno\\eNONET\ ::\ Errno\\eNOPROTOOPT\ ::\ Errno\\eNOSPC\ ::\ Errno\\eNOSR\ ::\ Errno\\eNOSTR\ ::\ Errno\\eNOSYS\ ::\ Errno\\eNOTBLK\ ::\ Errno\\eNOTCONN\ ::\ Errno\\eNOTDIR\ ::\ Errno\\eNOTEMPTY\ ::\ Errno\\eNOTSOCK\ ::\ Errno\\eNOTTY\ ::\ Errno\\eNXIO\ ::\ Errno\\eOPNOTSUPP\ ::\ Errno\\ePERM\ ::\ Errno\\ePFNOSUPPORT\ ::\ Errno\\ePIPE\ ::\ Errno\\ePROCLIM\ ::\ Errno\\ePROCUNAVAIL\ ::\ Errno\\ePROGMISMATCH\ ::\ Errno\\ePROGUNAVAIL\ ::\ Errno\\ePROTO\ ::\ Errno\\ePROTONOSUPPORT\ ::\ Errno\\ePROTOTYPE\ ::\ Errno\\eRANGE\ ::\ Errno\\eREMCHG\ ::\ Errno\\eREMOTE\ ::\ Errno\\eROFS\ ::\ Errno\\eRPCMISMATCH\ ::\ Errno\\eRREMOTE\ ::\ Errno\\eSHUTDOWN\ ::\ Errno\\eSOCKTNOSUPPORT\ ::\ Errno\\eSPIPE\ ::\ Errno\\eSRCH\ ::\ Errno\\eSRMNT\ ::\ Errno\\eSTALE\ ::\ Errno\\eTIME\ ::\ Errno\\eTIMEDOUT\ ::\ Errno\\eTOOMANYREFS\ ::\ Errno\\eTXTBSY\ ::\ Errno\\eUSERS\ ::\ Errno\\eWOULDBLOCK\ ::\ Errno\\eXDEV\ ::\ Errno
\end{tabular}]
\end{haddockdesc}
\subsection{\haddockid{Errno} functions
}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
isValidErrno\ ::\ Errno\ ->\ Bool
\end{tabular}]\haddockbegindoc
Yield \haddockid{True} if the given \haddockid{Errno} value is valid on the system.
 This implies that the \haddockid{Eq} instance of \haddockid{Errno} is also system dependent
 as it is only defined for valid values of \haddockid{Errno}.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
getErrno\ ::\ IO\ Errno
\end{tabular}]\haddockbegindoc
Get the current value of \haddocktt{errno} in the current thread.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
resetErrno\ ::\ IO\ ()
\end{tabular}]\haddockbegindoc
Reset the current thread's \haddocktt{errno} value to \haddockid{eOK}.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
errnoToIOError
\end{tabular}]\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{String} & the location where the error occurred
 \\
                                              \haddockdecltt{->} & \haddockdecltt{Errno} & the error number
 \\
                                                                                           \haddockdecltt{->} & \haddockdecltt{Maybe Handle} & optional handle associated with the error
 \\
                                                                                                                                               \haddockdecltt{->} & \haddockdecltt{Maybe String} & optional filename associated with the error
 \\
                                                                                                                                                                                                   \haddockdecltt{->} & \haddockdecltt{IOError} & \\
\haddockendargs\par
Construct a Haskell 98 I/O error based on the given \haddockid{Errno} value.
 The optional information can be used to improve the accuracy of
 error messages.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrno
\end{tabular}]\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{String} & textual description of the error location
 \\
                                              \haddockdecltt{->} & \haddockdecltt{IO a} & \\
\haddockendargs\par
Throw an \haddockid{IOError} corresponding to the current value of \haddockid{getErrno}.
\par

\end{haddockdesc}
\subsection{Guards for IO operations that may fail
}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoIf
\end{tabular}]\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{(a
                                     -> Bool)} & predicate to apply to the result value
 of the \haddockid{IO} operation
 \\
                                                 \haddockdecltt{->} & \haddockdecltt{String} & textual description of the location
 \\
                                                                                               \haddockdecltt{->} & \haddockdecltt{IO a} & the \haddockid{IO} operation to be executed
 \\
                                                                                                                                           \haddockdecltt{->} & \haddockdecltt{IO a} & \\
\haddockendargs\par
Throw an \haddockid{IOError} corresponding to the current value of \haddockid{getErrno}
 if the result value of the \haddockid{IO} action meets the given predicate.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoIf{\char '137}\ ::\ (a\ ->\ Bool)\ ->\ String\ ->\ IO\ a\ ->\ IO\ ()
\end{tabular}]\haddockbegindoc
as \haddockid{throwErrnoIf}, but discards the result of the \haddockid{IO} action after
 error handling.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoIfRetry\ ::\ (a\ ->\ Bool)\ ->\ String\ ->\ IO\ a\ ->\ IO\ a
\end{tabular}]\haddockbegindoc
as \haddockid{throwErrnoIf}, but retry the \haddockid{IO} action when it yields the
 error code \haddockid{eINTR} - this amounts to the standard retry loop for
 interrupted POSIX system calls.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoIfRetry{\char '137}\ ::\ (a\ ->\ Bool)\ ->\ String\ ->\ IO\ a\ ->\ IO\ ()
\end{tabular}]\haddockbegindoc
as \haddockid{throwErrnoIfRetry}, but discards the result.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoIfMinus1\ ::\ Num\ a\ =>\ String\ ->\ IO\ a\ ->\ IO\ a
\end{tabular}]\haddockbegindoc
Throw an \haddockid{IOError} corresponding to the current value of \haddockid{getErrno}
 if the \haddockid{IO} action returns a result of \haddocktt{-1}.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoIfMinus1{\char '137}\ ::\ Num\ a\ =>\ String\ ->\ IO\ a\ ->\ IO\ ()
\end{tabular}]\haddockbegindoc
as \haddockid{throwErrnoIfMinus1}, but discards the result.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoIfMinus1Retry\ ::\ Num\ a\ =>\ String\ ->\ IO\ a\ ->\ IO\ a
\end{tabular}]\haddockbegindoc
Throw an \haddockid{IOError} corresponding to the current value of \haddockid{getErrno}
 if the \haddockid{IO} action returns a result of \haddocktt{-1}, but retries in case of
 an interrupted operation.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoIfMinus1Retry{\char '137}\ ::\ Num\ a\ =>\ String\ ->\ IO\ a\ ->\ IO\ ()
\end{tabular}]\haddockbegindoc
as \haddockid{throwErrnoIfMinus1}, but discards the result.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoIfNull\ ::\ String\ ->\ IO\ (Ptr\ a)\ ->\ IO\ (Ptr\ a)
\end{tabular}]\haddockbegindoc
Throw an \haddockid{IOError} corresponding to the current value of \haddockid{getErrno}
 if the \haddockid{IO} action returns \haddockid{nullPtr}.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoIfNullRetry\ ::\ String\ ->\ IO\ (Ptr\ a)\ ->\ IO\ (Ptr\ a)
\end{tabular}]\haddockbegindoc
Throw an \haddockid{IOError} corresponding to the current value of \haddockid{getErrno}
 if the \haddockid{IO} action returns \haddockid{nullPtr},
 but retry in case of an interrupted operation.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoIfRetryMayBlock
\end{tabular}]\haddockbegindoc
\haddockbeginargs
\haddockdecltt{::} & \haddockdecltt{(a
                                     -> Bool)} & predicate to apply to the result value
 of the \haddockid{IO} operation
 \\
                                                 \haddockdecltt{->} & \haddockdecltt{String} & textual description of the location
 \\
                                                                                               \haddockdecltt{->} & \haddockdecltt{IO a} & the \haddockid{IO} operation to be executed
 \\
                                                                                                                                           \haddockdecltt{->} & \haddockdecltt{IO b} & action to execute before retrying if
 an immediate retry would block
 \\
                                                                                                                                                                                       \haddockdecltt{->} & \haddockdecltt{IO a} & \\
\haddockendargs\par
as \haddockid{throwErrnoIfRetry}, but additionlly if the operation 
 yields the error code \haddockid{eAGAIN} or \haddockid{eWOULDBLOCK}, an alternative
 action is executed before retrying.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoIfRetryMayBlock{\char '137}\ ::\ (a\ ->\ Bool)\\\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ->\ String\ ->\ IO\ a\ ->\ IO\ b\ ->\ IO\ ()
\end{tabular}]\haddockbegindoc
as \haddockid{throwErrnoIfRetryMayBlock}, but discards the result.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoIfMinus1RetryMayBlock\ ::\ Num\ a\ =>\ String\\\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ->\ IO\ a\ ->\ IO\ b\ ->\ IO\ a
\end{tabular}]\haddockbegindoc
as \haddockid{throwErrnoIfMinus1Retry}, but checks for operations that would block.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoIfMinus1RetryMayBlock{\char '137}\ ::\ Num\ a\ =>\ String\\\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ->\ IO\ a\ ->\ IO\ b\ ->\ IO\ ()
\end{tabular}]\haddockbegindoc
as \haddockid{throwErrnoIfMinus1RetryMayBlock}, but discards the result.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoIfNullRetryMayBlock\ ::\ String\\\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ->\ IO\ (Ptr\ a)\ ->\ IO\ b\ ->\ IO\ (Ptr\ a)
\end{tabular}]\haddockbegindoc
as \haddockid{throwErrnoIfNullRetry}, but checks for operations that would block.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoPath\ ::\ String\ ->\ FilePath\ ->\ IO\ a
\end{tabular}]\haddockbegindoc
as \haddockid{throwErrno}, but exceptions include the given path when appropriate.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoPathIf\ ::\ (a\ ->\ Bool)\\\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ->\ String\ ->\ FilePath\ ->\ IO\ a\ ->\ IO\ a
\end{tabular}]\haddockbegindoc
as \haddockid{throwErrnoIf}, but exceptions include the given path when
   appropriate.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoPathIf{\char '137}\ ::\ (a\ ->\ Bool)\\\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ->\ String\ ->\ FilePath\ ->\ IO\ a\ ->\ IO\ ()
\end{tabular}]\haddockbegindoc
as \haddockid{throwErrnoIf{\char '137}}, but exceptions include the given path when
   appropriate.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoPathIfNull\ ::\ String\\\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ->\ FilePath\ ->\ IO\ (Ptr\ a)\ ->\ IO\ (Ptr\ a)
\end{tabular}]\haddockbegindoc
as \haddockid{throwErrnoIfNull}, but exceptions include the given path when
   appropriate.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoPathIfMinus1\ ::\ Num\ a\ =>\ String\\\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ->\ FilePath\ ->\ IO\ a\ ->\ IO\ a
\end{tabular}]\haddockbegindoc
as \haddockid{throwErrnoIfMinus1}, but exceptions include the given path when
   appropriate.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
throwErrnoPathIfMinus1{\char '137}\ ::\ Num\ a\ =>\ String\\\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ->\ FilePath\ ->\ IO\ a\ ->\ IO\ ()
\end{tabular}]\haddockbegindoc
as \haddockid{throwErrnoIfMinus1{\char '137}}, but exceptions include the given path when
   appropriate.
\par

\end{haddockdesc}