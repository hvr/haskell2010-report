<html>
<head>
</head>
<HEAD>
<TITLE>Haskell 98 (Revised Report): ERRATA</title></head>
</head>
</head>
</head>
</head>
</HEAD>
<BODY>
<div align=center>
<img src="h98.gif" alt="Haskell 98">
</div>

<h2>Errata in the 
<a href="http://haskell.cs.yale.edu/definition/">Revised Haskell 98 Language Report (2003)</a></h2>

The list below gives all known errors in "Haskell 98 Language and Libraries: the Revised Report",
published by Cambridge University Press as a book, and also in the Journal of Functional Programming
13(1) (Jan 2003). 
All page references are to these texts, which may differ slightly from the online versions.

<ul>
<p><li> [May 2003] <strong>Page 89, Section 6.3.4, The Enum Class.</strong>
Section 6.3.4 states: "For all four of these Prelude numeric types, all of the <tt>enumFrom</tt>
family of functions are strict in all their arguments".
<p>
Alas, this contradicts the code for the Prelude in Chapter 8 for <tt>Float</tt> and <tt>Double</tt>.
In particular, the instances for <tt>enumFrom</tt> and <tt>enumFromThen</tt> 
for <tt>Float</tt> and <tt>Double</tt> are defined in terms of 
<tt>numericEnumFrom</tt>, <tt>numericEnumFromThen</tt>, which are not strict (see p113).
They both deliver an infinite list even if their argument is undefined.
<p>
The fix is presumably to add a <tt>seq</tt> to the instances for <tt>Float</tt> and <tt>Double</tt>.

<p><li> [June 2003] <strong>Page 95, Section 6.4.6, Coercions and Component Extraction.</strong>
The specification for <tt>properFraction</tt> does not deal properly 
with the case where <em>x</em> is zero.  Here is a suggested rewording:
<p>
"The function <tt>properFraction</tt> takes a real fractional number x and returns
a pair <em>(n,f)</em> such that <em>x = n+f</em>, and: <em>n</em> is an integral number; <em>f</em> is a
fraction with the same type as <em>x</em> and with absolute value less than 1;
either <em>n</em> is zero or <em>n</em> has the same sign as <em>x</em>; and either <em>f</em> is zero or <em>f</em>
has the same sign as <em>x</em>."

<p><li> [Feb 2003] <strong>Page 123, Section 8.2, PreludeText.</strong>
In the defintion of <tt>lex</tt> make the following changes:
<ul>
<li> Replace <tt>isAlpha</tt> in the third guard by <tt>isIdInit</tt>.

<li> In the definition of <tt>isSingle</tt>, remove the underscore '_' from the quoted list.

<li> Add the following local definition:
<pre>
  isIdInit c = isAlpha c || c == '_'
</pre>
</ul>
[These changes reflect the fact that an identifier can start with an underscore.]

<p><li> [March 2003] <strong>Page 170, Chapter 15 Indexing operations.</strong>.  
Replace the (bogus) law "<tt>map index (range (l,u)) = [0..rangeSize (l,u)]</tt>" by
<pre>
  map (index (l,u)) (range (l,u)) = [0 .. rangeSize (l,u) - 1]
</pre>

<p><li> [March 2003] <strong>Page 194, line -9, Chapter 19 Character
utilities.</strong>.  Replace "converts the to the character it
encodes" by "converts the string to the character it encodes".


<p><li> [July 2003] <strong>Index to the online version (only)</strong>.
<ul>
<li>The type for <tt>either</tt> is missing.
<li>
The type for <tt>print</tt> should be
<pre>
   print :: Show a => a -> IO ()
</pre>
</ul>
</ul>
<hr>
<address>Simon Peyton Jones, simonpj@microsoft.com</address>
</body>
</html>

